<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wanderlust</title>
</head>
<body>
    <h3>Listing Details:</h3>
    <ul>
        <li><%= listing.title %></li>
        <li><%= listing.description %></li>
        <li>&#8377; <%= listing.price.toLocaleString("en-IN") %></li>
        <li><%= listing.location %></li>
        <li><%= listing.country %></li>
    </ul>
    <br>
    <button><a href="/listings/<%= listing._id %>/edit">Edit this Listing</a></button>
    <br><br>
    <form method="POST" action="/listings/<%= listing._id %>?_method=DELETE" >
        <button class="delete-form">Delete</button>
    </form>

    <script>
        console.log("Script loaded"); // Debugging line to check if the script is loaded

        let btns = document.querySelectorAll(".delete-form");
        btns.forEach(btn => {
            btn.addEventListener('submit', function(event) {
                    const confirmed = confirm("Are you sure you want to delete this chat?");
                    if (!confirmed) {
                        event.preventDefault(); // Prevent the form submission
                    }
                });
            });

    </script>
</body>
</html>